{% extends 'base.html' %}

{% block title %}Digital Signature Wallet{% endblock %}

{% block content %}
<style>
/* Enhanced Color Scheme and Typography */
:root {
    --primary-blue: #1e40af;
    --primary-blue-light: #3b82f6;
    --secondary-purple: #7c3aed;
    --success-green: #059669;
    --success-green-light: #10b981;
    --warning-orange: #ea580c;
    --info-cyan: #0891b2;
    --dark-gray: #374151;
    --medium-gray: #6b7280;
    --light-gray: #f3f4f6;
    --border-gray: #e5e7eb;
    --text-primary: #111827;
    --text-secondary: #4b5563;
    --text-muted: #9ca3af;
}

.wallet-header {
    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-purple) 100%);
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 40px;
    color: white;
    position: relative;
    overflow: hidden;
    box-shadow: 0 15px 35px rgba(30, 64, 175, 0.3);
}

.wallet-header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 100%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
}

.wallet-header h1 {
    color: white;
    font-weight: 800;
    font-size: 2.5rem;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 8px;
}

.wallet-header p {
    color: rgba(255,255,255,0.9);
    font-size: 1.2rem;
    font-weight: 400;
    margin-bottom: 0;
}

.status-badge {
    background: rgba(5, 150, 105, 0.2);
    border: 2px solid rgba(5, 150, 105, 0.4);
    border-radius: 30px;
    padding: 12px 24px;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    backdrop-filter: blur(10px);
}

.status-dot {
    width: 10px;
    height: 10px;
    background: var(--success-green);
    border-radius: 50%;
    animation: pulse 2s infinite;
    box-shadow: 0 0 10px rgba(5, 150, 105, 0.5);
}

@keyframes pulse {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
}

/* Enhanced Card Styles */
.dashboard-card {
    background: white;
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 0.4s ease;
    height: 100%;
    position: relative;
    overflow: hidden;
}

.dashboard-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue-light), var(--secondary-purple));
    opacity: 0;
    transition: opacity 0.3s ease;
}

.dashboard-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
}

.dashboard-card:hover::before {
    opacity: 1;
}

.dashboard-card h5 {
    color: #000000 !important;
    font-weight: 700;
    font-size: 1.3rem;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.dashboard-card h5 i {
    color: #000000 !important;
}

.dashboard-card h6 {
    color: #000000 !important;
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 16px;
}

/* Wallet Info Card */
.wallet-info-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 1px solid rgba(0, 0, 0, 0.08);
    position: relative;
}

.wallet-info-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue-light), var(--secondary-purple));
}

.wallet-info-card .card-icon {
    width: 70px;
    height: 70px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple));
    color: white;
    margin-bottom: 24px;
    box-shadow: 0 12px 30px rgba(59, 130, 246, 0.4);
    position: relative;
}

.wallet-info-card .card-icon::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 22px;
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple));
    opacity: 0.3;
    z-index: -1;
    filter: blur(8px);
}

/* Stats Cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

.stat-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    border: 1px solid var(--border-gray);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue-light), var(--secondary-purple));
}

.stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

.stat-card .stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin: 0 auto 16px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.stat-card .stat-icon.primary { 
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple)); 
    color: white; 
}
.stat-card .stat-icon.success { 
    background: linear-gradient(135deg, var(--success-green), var(--success-green-light)); 
    color: white; 
}
.stat-card .stat-icon.warning { 
    background: linear-gradient(135deg, var(--warning-orange), #f97316); 
    color: white; 
}
.stat-card .stat-icon.info { 
    background: linear-gradient(135deg, var(--info-cyan), #0e7490); 
    color: white; 
}

.stat-card .stat-value {
    font-size: 2rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.stat-card .stat-label {
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 0.95rem;
}

/* Action Cards */
.action-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    margin-bottom: 32px;
}

.action-card {
    background: white;
    border-radius: 16px;
    padding: 28px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid var(--border-gray);
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
    display: block;
    position: relative;
    overflow: hidden;
}

.action-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue-light), var(--secondary-purple));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.action-card:hover::before {
    transform: scaleX(1);
}

.action-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
    text-decoration: none;
    color: inherit;
}

.action-card .action-icon {
    width: 60px;
    height: 60px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.action-card .action-icon.primary { 
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple)); 
    color: white; 
}
.action-card .action-icon.success { 
    background: linear-gradient(135deg, var(--success-green), var(--success-green-light)); 
    color: white; 
}
.action-card .action-icon.secondary { 
    background: linear-gradient(135deg, var(--dark-gray), #4b5563); 
    color: white; 
}

.action-card h6 {
    color: #000000 !important;
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 12px;
}

.action-card p {
    color: #000000 !important;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 0;
}

/* Form Elements */
.form-group {
    margin-bottom: 24px;
}

.form-label {
    color: #000000 !important;
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.copy-input {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 0.95rem;
    color: #000000 !important;
    font-weight: 600;
    padding: 16px 20px;
    transition: all 0.3s ease;
}

.copy-input:focus {
    border-color: var(--primary-blue-light);
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    outline: none;
    background: #ffffff;
}

.copy-btn {
    background: linear-gradient(135deg, var(--primary-blue-light), var(--primary-blue));
    border: none;
    color: white;
    border-radius: 16px;
    transition: all 0.3s ease;
    font-weight: 700;
    padding: 16px 20px;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.copy-btn:hover {
    background: linear-gradient(135deg, var(--primary-blue), #1e40af);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

/* Buttons */
.btn-primary {
    background: linear-gradient(135deg, var(--primary-blue-light), var(--primary-blue));
    border: none;
    border-radius: 12px;
    font-weight: 600;
    padding: 14px 28px;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: linear-gradient(135deg, var(--primary-blue), #1e40af);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
}

.btn-outline-primary {
    border: 2px solid var(--primary-blue-light);
    color: var(--primary-blue-light);
    border-radius: 12px;
    font-weight: 600;
    padding: 12px 24px;
    transition: all 0.3s ease;
}

.btn-outline-primary:hover {
    background: var(--primary-blue-light);
    border-color: var(--primary-blue-light);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.btn-warning {
    background: linear-gradient(135deg, var(--warning-orange), #f97316);
    border: none;
    border-radius: 12px;
    font-weight: 600;
    padding: 14px 28px;
    box-shadow: 0 4px 15px rgba(234, 88, 12, 0.3);
    transition: all 0.3s ease;
}

.btn-warning:hover {
    background: linear-gradient(135deg, #f97316, var(--warning-orange));
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(234, 88, 12, 0.4);
}

/* Badges */
.badge {
    font-weight: 700;
    font-size: 0.9rem;
    padding: 10px 18px;
    border-radius: 25px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.badge.bg-success {
    background: linear-gradient(135deg, var(--success-green), var(--success-green-light)) !important;
    box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);
}

.badge.bg-primary {
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple)) !important;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

.badge.bg-warning {
    background: linear-gradient(135deg, var(--warning-orange), #f97316) !important;
    box-shadow: 0 2px 8px rgba(234, 88, 12, 0.3);
}

.badge.bg-secondary {
    background: linear-gradient(135deg, var(--medium-gray), var(--dark-gray)) !important;
}

.badge.bg-info {
    background: linear-gradient(135deg, var(--info-cyan), #0e7490) !important;
    box-shadow: 0 2px 8px rgba(8, 145, 178, 0.3);
}

/* Reports Table */
.reports-table {
    background: white;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.table-header {
    background: linear-gradient(135deg, var(--info-cyan), #0e7490);
    color: white;
    padding: 32px 40px;
    border: none;
    position: relative;
}

.table-header::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
}

.table-header h5 {
    color: white;
    font-weight: 800;
    font-size: 1.4rem;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.table th {
    border: none;
    font-weight: 800;
    color: #000000 !important;
    padding: 24px 20px;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    position: relative;
}

.table th::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--primary-blue-light), var(--secondary-purple));
}

.table td {
    border: none;
    padding: 24px 20px;
    vertical-align: middle;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    color: #000000 !important;
    font-weight: 500;
}

.table tbody tr:hover {
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    transform: scale(1.01);
    transition: all 0.2s ease;
}

.report-badge {
    background: linear-gradient(135deg, var(--primary-blue-light), var(--secondary-purple));
    color: white;
    border-radius: 30px;
    padding: 10px 20px;
    font-size: 0.9rem;
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.empty-state h5, .empty-state h6 {
    color: #000000 !important;
    font-weight: 600;
}

.empty-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--light-gray), #e5e7eb);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 2rem;
    color: var(--text-muted);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
}

/* Responsive Design */
@media (max-width: 768px) {
    .wallet-header {
        padding: 24px;
        margin-bottom: 24px;
    }
    
    .wallet-header h1 {
        font-size: 2rem;
    }
    
    .dashboard-card {
        padding: 24px;
        margin-bottom: 20px;
    }
    
    .stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
    }
    
    .action-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
}
</style>

<div class="container-fluid px-4 py-4">
    <!-- Enhanced Header -->
    <div class="wallet-header position-relative">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="mb-2">🔐 Digital Signature Wallet</h1>
                <p class="mb-0">Professional blockchain-based document signing for law enforcement</p>
            </div>
            <div class="col-md-4 text-md-end mt-3 mt-md-0">
                {% if officer_wallet.is_active %}
                    <div class="status-badge text-white">
                        <span class="status-dot"></span>
                        <span class="fw-bold">Wallet Active</span>
                    </div>
                {% else %}
                    <div class="status-badge bg-warning text-dark">
                        <span class="status-dot bg-danger"></span>
                        <span class="fw-bold">Wallet Inactive</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    
    <!-- Wallet Information -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dashboard-card wallet-info-card">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <div class="d-flex align-items-center mb-3">
                            <div class="card-icon me-3">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Wallet Details</h5>
                                <div class="d-flex gap-2">
                                    <span class="badge bg-success">Secure</span>
                                    {% if officer_wallet.has_valid_credential %}
                                        <span class="badge bg-primary">XLS-70 Ready</span>
                                    {% elif officer_wallet.credential_id %}
                                        <span class="badge bg-warning">Credential Pending</span>
                                    {% else %}
                                        <span class="badge bg-secondary">No Credential</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <div class="d-grid gap-2">
                            <a href="https://devnet.xrpl.org/accounts/{{ officer_wallet.wallet_address }}" 
                               target="_blank" class="btn btn-outline-primary">
                                <i class="fas fa-external-link-alt me-2"></i>View on XRPL Explorer
                            </a>
                            
                            {% if not officer_wallet.credential_id %}
                                <a href="{% url 'create_credential' %}" class="btn btn-primary">
                                    <i class="fas fa-certificate me-2"></i>Create XLS-70 Credential
                                </a>
                            {% elif not officer_wallet.credential_accepted_at %}
                                <form method="post" action="{% url 'accept_credential' %}" class="d-inline">
                                    {% csrf_token %}
                                    <input type="hidden" name="credential_id" value="{{ officer_wallet.credential_id }}">
                                    <button type="submit" class="btn btn-warning w-100">
                                        <i class="fas fa-check-circle me-2"></i>Accept Credential
                                    </button>
                                </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                <div class="row g-4 mt-4">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">Wallet Address</label>
                            <div class="input-group">
                                <input type="text" class="form-control copy-input" 
                                       value="{{ officer_wallet.wallet_address }}" 
                                       readonly id="walletAddress">
                                <button class="btn copy-btn" type="button" onclick="copyToClipboard('walletAddress')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Credential Information -->
                    {% if officer_wallet.credential_id %}
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label">XLS-70 Credential</label>
                            <div class="input-group">
                                <input type="text" class="form-control copy-input" 
                                       value="{{ officer_wallet.credential_id }}" 
                                       readonly id="credentialId">
                                <button class="btn copy-btn" type="button" onclick="copyToClipboard('credentialId')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="mt-3">
                                <span class="badge bg-info">{{ officer_wallet.credential_status }}</span>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="action-grid mb-4">
        <a href="{% url 'reports_completed' %}" class="action-card">
            <div class="action-icon primary">
                <i class="fas fa-signature"></i>
            </div>
            <h6>Sign New Reports</h6>
            <p>Digitally sign completed evidence reports to create tamper-proof records.</p>
        </a>
        
        <a href="{% url 'reports_all' %}" class="action-card">
            <div class="action-icon success">
                <i class="fas fa-file-alt"></i>
            </div>
            <h6>View All Reports</h6>
            <p>Browse all evidence reports, including those pending or completed.</p>
        </a>
        
        <a href="{% url 'dashboard' %}" class="action-card">
            <div class="action-icon secondary">
                <i class="fas fa-home"></i>
            </div>
            <h6>Main Dashboard</h6>
            <p>Return to the main evidence processing center dashboard.</p>
        </a>
    </div>
    
    <!-- My Signed Reports -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="reports-table">
                <div class="table-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-file-signature me-2"></i>My Signed Reports</h5>
                    <span class="badge bg-light text-dark">{{ signed_reports.count }} Total</span>
                </div>
                <div class="card-body p-0">
                    {% if signed_reports %}
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Report ID</th>
                                        <th>Incident Type</th>
                                        <th>Signed At</th>
                                        <th>Signature Type</th>
                                        <th>Transaction Hash</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for report in signed_reports %}
                                        <tr>
                                            <td>
                                                <span class="report-badge">#{{ report.id }}</span>
                                            </td>
                                            <td>
                                                <span class="badge bg-secondary">
                                                    {{ report.get_incident_type_display|default:"Not specified" }}
                                                </span>
                                            </td>
                                            <td>
                                                <div class="small" style="color: #000000 !important;">{{ report.signed_at|date:"M d, Y" }}</div>
                                                <div class="fw-medium" style="color: #000000 !important;">{{ report.signed_at|date:"H:i" }}</div>
                                            </td>
                                            <td>
                                                {% if report.signature_type == 'XLS70_CREDENTIAL' %}
                                                    <span class="badge bg-primary">🏆 XLS-70</span>
                                                {% elif report.signature_type == 'MOCK' %}
                                                    <span class="badge bg-warning">🧪 Mock</span>
                                                {% else %}
                                                    <span class="badge bg-success">📝 Standard</span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="input-group input-group-sm">
                                                    <input type="text" class="form-control copy-input small" 
                                                           value="{{ report.signature_tx_hash|truncatechars:16 }}..." 
                                                           readonly id="txHash{{ report.id }}">
                                                    <button class="btn copy-btn btn-sm" type="button" 
                                                            onclick="copyToClipboard('txHash{{ report.id }}')">
                                                        <i class="fas fa-copy"></i>
                                                    </button>
                                                </div>
                                                <input type="hidden" id="txHash{{ report.id }}" value="{{ report.signature_tx_hash }}">
                                            </td>
                                            <td>
                                                <div class="btn-group" role="group">
                                                    <a href="{% url 'report_detail' report.id %}" 
                                                       class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-eye me-1"></i> View
                                                    </a>
                                                    <a href="{% url 'verify_signature' report.id %}" 
                                                       class="btn btn-sm btn-outline-success">
                                                        <i class="fas fa-shield-alt me-1"></i> Verify
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-file-signature"></i></div>
                            <h5 class="mb-2" style="color: #000000 !important;">No Signed Reports Yet</h5>
                            <p class="mb-4" style="color: #000000 !important;">Complete reports and sign them to create tamper-proof evidence records.</p>
                            <a href="{% url 'reports_completed' %}" class="btn btn-primary">
                                <i class="fas fa-signature me-2"></i>Sign Your First Report
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Copy Functionality -->
<script>
function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    const textToCopy = element.value;
    
    // Create a temporary textarea to hold the text
    const tempTextArea = document.createElement('textarea');
    tempTextArea.value = textToCopy;
    document.body.appendChild(tempTextArea);
    tempTextArea.select();
    tempTextArea.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        document.execCommand('copy');
        
        // Show success feedback
        const button = element.nextElementSibling;
        const originalIcon = button.querySelector('i').className;
        const originalText = button.innerHTML;
        
        button.innerHTML = '<i class="fas fa-check me-1"></i>Copied!';
        button.classList.remove('copy-btn');
        button.classList.add('btn-success');
        
        setTimeout(() => {
            button.innerHTML = originalText;
            button.classList.remove('btn-success');
            button.classList.add('copy-btn');
        }, 2000);
        
    } catch (err) {
        alert('Failed to copy. Please try again.');
    } finally {
        document.body.removeChild(tempTextArea);
    }
}
</script>
{% endblock %}